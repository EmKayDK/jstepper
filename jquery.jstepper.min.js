// jStepper 1.5.0
!function(e){e.fn.jStepper=function(t,n,l){if(this.length>1)return this.each(function(){$(this).jStepper(t)}),this;if("string"==typeof t)return"option"===t&&(null===l&&(l=e.fn.jStepper.defaults[n]),this.data("jstepper.o")[n]=l),this;var a=e.extend({},e.fn.jStepper.defaults,t);e.metadata&&(a=e.extend({},a,this.metadata())),this.data("jstepper.o",a),a.disableAutocomplete&&this.attr("autocomplete","off"),e.isFunction(this.mousewheel)&&this.mousewheel(function(t,n){if(!a.disableMouseWheel){if(n>0){var l=e.Event("keydown");return l.keyCode=38,r(1,l,this),!1}if(0>n){var l=e.Event("keydown");return l.keyCode=40,r(0,l,this),!1}}}),this.blur(function(){i(this,null)}),this.keydown(function(e){var t=e.keyCode;if(38===t)r(1,e,this);else if(40===t)r(0,e,this);else if("ignore"===a.overflowMode&&a.maxValue&&$(this).val().length>=a.maxValue.toString().length&&(t>=48&&57>=t||t>=96&&105>=t)&&this.selectionStart===this.selectionEnd)return!1}),this.keyup(function(e){i(this,e)});var i=function(t,n){var l=e(t),i=l.val(),r=i;a.disableNonNumeric&&(i=i.replace(/[^\d\.,\-]/gi,""));var s=!1;null!==a.maxValue&&i>a.maxValue&&(i=a.maxValue,s=!0),null!==a.minValue&&i<a.minValue&&""!=i&&(i=a.minValue,s=!0),(d(n)===!0||null===n||s===!0)&&(i=u(i)),r!=i&&l.val(i)},r=function(t,n,l){var r,u=e(l);r=n?n.ctrlKey?a.ctrlStep:n.shiftKey?a.shiftStep:a.normalStep:a.normalStep;var s=u.val(),o=s.length-l.selectionStart,f=s.length-l.selectionEnd;s=s.replace(/,/g,"."),s=s.replace(a.decimalSeparator,"."),s+="",-1!=s.indexOf(".")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.][0-9]*"))),s+="",-1!=s.indexOf("-")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*"))),s+="",s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*")),(""===s||"-"==s||null===s)&&(s=a.defaultValue),s=1===t?e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!0):e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!1);var m=!1;return null!==a.maxValue&&s>=a.maxValue&&(s=a.maxValue,m=!0),null!==a.minValue&&s<=a.minValue&&(s=a.minValue,m=!0),s=s.toString().replace(/\./,a.decimalSeparator),u.val(s),l.selectionStart=s.length-o,l.selectionEnd=s.length-f,i(l,n),a.onStep&&a.onStep(u,t,m),!1},u=function(e){var t=e.toString();return t=s(t),t=o(t),t=f(t),t=m(t)},s=function(e){var t=e;if(a.minDecimals>0){var n;if(-1!=t.indexOf(".")){var l=t.length-(t.indexOf(".")+1);l<a.minDecimals&&(n=a.minDecimals-l)}else n=a.minDecimals,t+=".";for(var i=1;n>=i;i++)t+="0"}return t},o=function(e){var t=e;if(a.maxDecimals>0){var n=0;-1!=t.indexOf(".")&&(n=t.length-(t.indexOf(".")+1),a.maxDecimals<n&&(t=t.substring(0,t.indexOf("."))+"."+t.substring(t.indexOf(".")+1,t.indexOf(".")+1+a.maxDecimals)))}return t},f=function(e){var t=e;return a.allowDecimals||(t=t.toString().replace(a.decimalSeparator,"."),t=t.replace(new RegExp("[\\.].+"),"")),t},m=function(e){var t=e;if(null!==a.minLength){var n=t.length;-1!=t.indexOf(".")&&(n=t.indexOf("."));var l=!1;if(-1!=t.indexOf("-")&&(l=!0,t=t.replace(/-/,"")),n<a.minLength)for(var i=1;i<=a.minLength-n;i++)t="0"+t;l&&(t="-"+t)}return t},d=function(e){var t=!1;return null!==e&&(38===e.keyCode||40===e.keyCode)&&(t=!0),t};return this},e.fn.jStepper.AddOrSubtractTwoFloats=function(e,t,n){var l=e.toString(),a=t.toString(),i="";if(l.indexOf(".")>-1||a.indexOf(".")>-1){-1===l.indexOf(".")&&(l+=".0"),-1===a.indexOf(".")&&(a+=".0");for(var r=l.substr(l.indexOf(".")+1),u=a.substr(a.indexOf(".")+1),s=l.substr(0,l.indexOf(".")),o=a.substr(0,a.indexOf(".")),f=!0;f;)r.length!==u.length?r.length<u.length?r+="0":u+="0":f=!1;for(var m=r.length,d=0;d<=r.length-1;d++)s+=r.substr(d,1),o+=u.substr(d,1);var c,h=Number(s),p=Number(o);c=n?h+p:h-p;var g=!1;0>c&&(g=!0,c=Math.abs(c)),i=c.toString();for(var x=0;x<m-i.length+1;x++)i="0"+i;i.length>=m&&(i=i.substring(0,i.length-m)+"."+i.substring(i.length-m)),g===!0&&(i="-"+i)}else i=n?Number(e)+Number(t):Number(e)-Number(t);return Number(i)},e.fn.jStepper.defaults={maxValue:null,minValue:null,normalStep:1,shiftStep:5,ctrlStep:10,minLength:null,disableAutocomplete:!0,defaultValue:1,decimalSeparator:",",allowDecimals:!0,minDecimals:0,maxDecimals:null,disableNonNumeric:!0,onStep:null,overflowMode:"default",disableMouseWheel:!1}}(jQuery);