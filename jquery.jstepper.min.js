// jStepper 1.4.0
!function(e){e.fn.jStepper=function(t){if(this.length>1)return this.each(function(){$(this).jStepper(t)}),this;var n=e.extend({},e.fn.jStepper.defaults,t);e.metadata&&(n=e.extend({},n,this.metadata())),n.disableAutocomplete&&this.attr("autocomplete","off"),e.isFunction(this.mousewheel)&&this.mousewheel(function(e,t){return t>0?(a(n,1,e,this),!1):0>t?(a(n,0,e,this),!1):void 0}),this.keydown(function(e){var t=e.keyCode;38===t&&a(n,1,e,this),40===t&&a(n,0,e,this)}),this.keyup(function(){l(n,this)});var l=function(t,n){var l=e(n),a=l.val(),i=a;t.disableNonNumeric&&(a=a.replace(/[^\d\.,\-]/gi,"")),t.allowDecimals||(a=a.replace(/[^\d\-]/gi,"")),null!==t.maxValue&&a>=t.maxValue&&(a=t.maxValue),null!==t.minValue&&a<t.minValue&&""!=a&&(a=t.minValue),i!=a&&l.val(a)},a=function(t,n,a,i){var r,u=e(i);r=a?a.ctrlKey?t.ctrlStep:a.shiftKey?t.shiftStep:t.normalStep:t.normalStep;var s=u.val(),m=s.length-i.selectionStart,f=s.length-i.selectionEnd;s=s.replace(/,/g,"."),s=s.replace(t.decimalSeparator,"."),s+="",-1!=s.indexOf(".")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.][0-9]*"))),s+="",-1!=s.indexOf("-")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*"))),s+="",s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*")),(""===s||"-"==s||null===s)&&(s=t.defaultValue),s=1===n?e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!0):e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!1);var o=!1;if(null!==t.maxValue&&s>=t.maxValue&&(s=t.maxValue,o=!0),null!==t.minValue&&s<=t.minValue&&(s=t.minValue,o=!0),s+="",null!==t.minLength){var c=s.length;-1!=s.indexOf(".")&&(c=s.indexOf("."));var d=!1;if(-1!=s.indexOf("-")&&(d=!0,s=s.replace(/-/,"")),c<t.minLength)for(var h=1;h<=t.minLength-c;h++)s="0"+s;d&&(s="-"+s)}s+="";var p;if(t.minDecimals>0){var x;-1!=s.indexOf(".")?(p=s.length-(s.indexOf(".")+1),p<t.minDecimals&&(x=t.minDecimals-p)):(x=t.minDecimals,s+=".");for(var g=1;x>=g;g++)s+="0"}return t.maxDecimals>0&&(p=0,-1!=s.indexOf(".")&&(p=s.length-(s.indexOf(".")+1),t.maxDecimals<p&&(s=s.substring(0,s.indexOf("."))+"."+s.substring(s.indexOf(".")+1,s.indexOf(".")+1+t.maxDecimals)))),t.allowDecimals||(s+="",s=s.replace(new RegExp("[\\.].+"),"")),s=s.replace(/\./,t.decimalSeparator),u.val(s),i.selectionStart=s.length-m,i.selectionEnd=s.length-f,l(t,i),t.onStep&&t.onStep(u,n,o),!1};return this},e.fn.jStepper.AddOrSubtractTwoFloats=function(e,t,n){var l=e.toString(),a=t.toString(),i="";if(l.indexOf(".")>-1||a.indexOf(".")>-1){-1==l.indexOf(".")&&(l+=".0"),-1==a.indexOf(".")&&(a+=".0");for(var r=l.substr(l.indexOf(".")+1),u=a.substr(a.indexOf(".")+1),s=l.substr(0,l.indexOf(".")),m=a.substr(0,a.indexOf(".")),f=!0;f;)r.length!==u.length?r.length<u.length?r+="0":u+="0":f=!1;for(var o=r.length,c=0;c<=r.length-1;c++)s+=r.substr(c,1),m+=u.substr(c,1);var d,h=Number(s),p=Number(m);d=n?h+p:h-p,i=d.toString();for(var x=0;x<o-i.length+1;x++)i="0"+i;i.length>=o&&(i=i.substring(0,i.length-o)+"."+i.substring(i.length-o))}else i=n?Number(e)+Number(t):Number(e)-Number(t);return Number(i)},e.fn.jStepper.defaults={maxValue:null,minValue:null,normalStep:1,shiftStep:5,ctrlStep:10,minLength:null,disableAutocomplete:!0,defaultValue:1,decimalSeparator:",",allowDecimals:!0,minDecimals:0,maxDecimals:null,disableNonNumeric:!0,onStep:null}}(jQuery);